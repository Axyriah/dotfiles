#!/bin/bash

# Command list:
# neovim install - Install neovim dependencies required to have a working environment - npm and yay are required

neovim_install() {
    git clone --depth 1 https://github.com/wbthomason/packer.nvim "$HOME/.local/share/nvim/site/pack/packer/start/packer.nvim"
    npm i -g typescript vls vscode-langservers-extracted pyright cssmodules-language-server @fsouza/prettierd eslint_d
    yay -S fzy go elixir-ls stylua clang rust-analyzer ocaml opam
    (mkdir -p "$HOME/.local/share/nvim/lsp-vsix/rescript" && cd "$HOME/.local/share/nvim/lsp-vsix/rescript" && wget https://github.com/rescript-lang/rescript-vscode/releases/download/latest-master/rescript-vscode-1.7.23.vsix && unzip rescript-vscode-1.7.23.vsix && rm -f rescript-vscode-1.7.23.vsix)
    opam install ocaml-lsp-server # run 'opam init' then this command again if it does not work
} 

jdtls_install() {
    curl https://raw.githubusercontent.com/eruizc-dev/jdtls-launcher/master/install.sh | bash
}

# Execute command passed as argument
case "$@" in
    'neovim install')
        neovim_install
        ;;
    'jdtls install')
        jdtls_install
        ;;
    *)
        echo "Usage: $0 [command]"
        echo "Commands: 'neovim install', 'jdtls install'"
        ;;
esac
